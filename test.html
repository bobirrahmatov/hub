<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tooltip Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        #cursorTooltip {
            position: absolute !important;
            z-index: 999999 !important;
            pointer-events: none !important;
            display: none !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        #cursorTooltip.show {
            display: block !important;
        }
        
        #cursorTooltipContent {
            background-color: white !important;
            color: #374151 !important;
            font-size: 0.75rem !important;
            line-height: 1rem !important;
            padding: 0.5rem 0.75rem !important;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
        }
    </style>
</head>
<body class="bg-gray-50 p-8" style="position: relative;">
    <!-- Tooltip that follows cursor -->
    <div id="cursorTooltip" style="position: absolute; z-index: 999999; pointer-events: none; display: none; visibility: hidden; left: -9999px; top: -9999px;">
        <div style="position: relative;">
            <div id="cursorTooltipContent" class="rounded-lg bg-white border border-gray-200 px-3 py-2 text-xs font-medium text-gray-700 shadow-lg whitespace-nowrap" style="background-color: white; color: #374151; font-size: 0.75rem; padding: 0.5rem 0.75rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); white-space: nowrap;"></div>
            <div class="absolute -bottom-1 left-1/2 h-3 w-3 -translate-x-1/2 rotate-45 bg-white border-r border-b border-gray-200" style="position: absolute; bottom: -4px; left: 50%; width: 12px; height: 12px; transform: translateX(-50%) rotate(45deg); background-color: white; border-right: 1px solid #e5e7eb; border-bottom: 1px solid #e5e7eb;"></div>
        </div>
    </div>
    <div class="max-w-7xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-900 mb-8">Tooltip Test Page</h1>
        
        <div class="mb-8 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <h2 class="text-lg font-semibold text-blue-900 mb-2">âœ¨ Cursor-Following Tooltips</h2>
            <p class="text-blue-800 mb-2">Hover over any row in the tables below to see tooltips that follow your cursor.</p>
            <ul class="text-sm text-blue-700 list-disc list-inside space-y-1">
                <li>âœ… Tooltip follows mouse cursor position</li>
                <li>âœ… JavaScript-powered positioning</li>
                <li>âœ… White background with border and arrow</li>
                <li>âœ… Facility table shows facility type</li>
                <li>âœ… Covenant table shows full description</li>
            </ul>
        </div>

        <!-- Facilities Table -->
        <div class="mb-8 rounded-2xl border border-gray-200 bg-white overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-gray-800">Facility Details Table</h2>
                <p class="text-sm text-gray-500 mt-1">Hover over rows to see facility type tooltips</p>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Region</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Facility ID</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Product</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Amount</th>
                        </tr>
                    </thead>
                    <tbody id="facilitiesTable" class="divide-y divide-gray-200">
                        <tr class="hover:bg-gray-50 cursor-pointer transition-colors" 
                            data-facility-type="Revolving Credit Line" data-risk-rating="Pass">
                            <td class="px-6 py-4">
                                <span class="bg-purple-100 text-purple-700 rounded-full px-3 py-1 text-sm font-medium">NAM</span>
                            </td>
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">FAC-001</td>
                            <td class="px-6 py-4 text-sm text-gray-700">Corporate Lending</td>
                            <td class="px-6 py-4 text-sm text-gray-700">$5,000,000</td>
                        </tr>
                        <tr class="hover:bg-gray-50 cursor-pointer transition-colors" 
                            data-facility-type="Term Loan" data-risk-rating="Pass">
                            <td class="px-6 py-4">
                                <span class="bg-amber-100 text-amber-700 rounded-full px-3 py-1 text-sm font-medium">EMEA</span>
                            </td>
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">FAC-002</td>
                            <td class="px-6 py-4 text-sm text-gray-700">Trade Finance</td>
                            <td class="px-6 py-4 text-sm text-gray-700">$3,000,000</td>
                        </tr>
                        <tr class="hover:bg-gray-50 cursor-pointer transition-colors" 
                            data-facility-type="Letter of Credit" data-risk-rating="Special Mention">
                            <td class="px-6 py-4">
                                <span class="bg-emerald-100 text-emerald-700 rounded-full px-3 py-1 text-sm font-medium">APAC</span>
                            </td>
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">FAC-003</td>
                            <td class="px-6 py-4 text-sm text-gray-700">Working Capital</td>
                            <td class="px-6 py-4 text-sm text-gray-700">$1,500,000</td>
                        </tr>
                        <tr class="hover:bg-gray-50 cursor-pointer transition-colors" 
                            data-facility-type="Bridge Loan" data-risk-rating="Pass">
                            <td class="px-6 py-4">
                                <span class="bg-blue-100 text-blue-700 rounded-full px-3 py-1 text-sm font-medium">LATAM</span>
                            </td>
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">FAC-004</td>
                            <td class="px-6 py-4 text-sm text-gray-700">Real Estate</td>
                            <td class="px-6 py-4 text-sm text-gray-700">$2,200,000</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Covenants Table -->
        <div class="rounded-2xl border border-gray-200 bg-white overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-gray-800">Covenants Table</h2>
                <p class="text-sm text-gray-500 mt-1">Hover over rows to see covenant description tooltips</p>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Region</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Covenant #</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Due Date</th>
                            <th class="px-6 py-4 text-left text-sm font-medium text-gray-500">Status</th>
                        </tr>
                    </thead>
                    <tbody id="covenantsTable" class="divide-y divide-gray-200">
                        <tr class="hover:bg-gray-50 cursor-pointer transition-colors" 
                            data-covenant-description="Maintain minimum debt service coverage ratio of 1.5x measured quarterly">
                            <td class="px-6 py-4">
                                <span class="bg-purple-100 text-purple-700 rounded-full px-3 py-1 text-sm font-medium">NAM</span>
                            </td>
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">COV-2024-001</td>
                            <td class="px-6 py-4 text-sm text-gray-700">31/03/2024</td>
                            <td class="px-6 py-4">
                                <span class="bg-red-50 text-red-600 rounded-full px-3 py-1 text-sm font-medium">Past Due (15d)</span>
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50 cursor-pointer transition-colors" 
                            data-covenant-description="Submit audited financial statements within 90 days of fiscal year end">
                            <td class="px-6 py-4">
                                <span class="bg-amber-100 text-amber-700 rounded-full px-3 py-1 text-sm font-medium">EMEA</span>
                            </td>
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">COV-2024-002</td>
                            <td class="px-6 py-4 text-sm text-gray-700">30/06/2024</td>
                            <td class="px-6 py-4">
                                <span class="bg-yellow-50 text-yellow-600 rounded-full px-3 py-1 text-sm font-medium">Coming Due (45d)</span>
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50 cursor-pointer transition-colors" 
                            data-covenant-description="Tangible net worth shall not be less than $10 million at any time during the loan period">
                            <td class="px-6 py-4">
                                <span class="bg-emerald-100 text-emerald-700 rounded-full px-3 py-1 text-sm font-medium">APAC</span>
                            </td>
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">COV-2024-003</td>
                            <td class="px-6 py-4 text-sm text-gray-700">31/12/2024</td>
                            <td class="px-6 py-4">
                                <span class="bg-yellow-50 text-yellow-600 rounded-full px-3 py-1 text-sm font-medium">Coming Due (120d)</span>
                            </td>
                        </tr>
                        <tr class="hover:bg-gray-50 cursor-pointer transition-colors" 
                            data-covenant-description="Borrower shall maintain insurance coverage on all assets with minimum coverage amounts as specified in schedule A">
                            <td class="px-6 py-4">
                                <span class="bg-blue-100 text-blue-700 rounded-full px-3 py-1 text-sm font-medium">LATAM</span>
                            </td>
                            <td class="px-6 py-4 text-sm font-medium text-gray-900">COV-2024-004</td>
                            <td class="px-6 py-4 text-sm text-gray-700">31/01/2025</td>
                            <td class="px-6 py-4">
                                <span class="bg-green-50 text-green-600 rounded-full px-3 py-1 text-sm font-medium">Current</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Success Message -->
        <div class="mt-8 p-4 bg-green-50 border border-green-200 rounded-lg">
            <h3 class="text-lg font-semibold text-green-900 mb-2">âœ… Success!</h3>
            <p class="text-green-700">Tooltips now follow your cursor for precise positioning!</p>
        </div>
    </div>

    <script>
        // Cursor-following tooltip implementation
        const tooltip = document.getElementById('cursorTooltip');
        const tooltipContent = document.getElementById('cursorTooltipContent');
        
        // Attach handlers to facility table rows
        const facilityRows = document.querySelectorAll('#facilitiesTable tr[data-facility-type]');
        facilityRows.forEach(row => {
            row.addEventListener('mouseenter', function(e) {
                const facilityType = this.getAttribute('data-facility-type');
                const riskRating = this.getAttribute('data-risk-rating');
                tooltipContent.innerHTML = `<strong>Facility Type:</strong> ${facilityType}<br><strong>Credit Classification:</strong> ${riskRating}`;
                
                // Position FIRST, then make visible
                tooltip.style.display = 'block';
                tooltip.style.visibility = 'hidden'; // Hidden while positioning
                updateTooltipPosition(e);
                tooltip.style.visibility = 'visible'; // Now show it
                tooltip.classList.add('show');
            });
            
            row.addEventListener('mousemove', updateTooltipPosition);
            
            row.addEventListener('mouseleave', function() {
                tooltip.style.display = 'none';
                tooltip.style.visibility = 'hidden';
                tooltip.classList.remove('show');
            });
        });
        
        // Attach handlers to covenant table rows
        const covenantRows = document.querySelectorAll('#covenantsTable tr[data-covenant-description]');
        covenantRows.forEach(row => {
            row.addEventListener('mouseenter', function(e) {
                const description = this.getAttribute('data-covenant-description');
                tooltipContent.innerHTML = `<strong>Description:</strong> ${description}`;
                tooltipContent.style.maxWidth = '300px';
                tooltipContent.style.whiteSpace = 'normal';
                
                // Position FIRST, then make visible
                tooltip.style.display = 'block';
                tooltip.style.visibility = 'hidden'; // Hidden while positioning
                updateTooltipPosition(e);
                tooltip.style.visibility = 'visible'; // Now show it
                tooltip.classList.add('show');
            });
            
            row.addEventListener('mousemove', updateTooltipPosition);
            
            row.addEventListener('mouseleave', function() {
                tooltip.style.display = 'none';
                tooltip.style.visibility = 'hidden';
                tooltip.classList.remove('show');
                tooltipContent.style.maxWidth = '';
                tooltipContent.style.whiteSpace = 'nowrap';
            });
        });
        
        // Update tooltip position based on cursor
        function updateTooltipPosition(e) {
            const offsetY = 20; // Distance above cursor
            
            // Get tooltip dimensions
            const tooltipRect = tooltip.getBoundingClientRect();
            
            // Use pageX/pageY for absolute positioning (includes scroll offset)
            let left = e.pageX - (tooltipRect.width / 2);
            let top = e.pageY - tooltipRect.height - offsetY;
            
            // Adjust if tooltip goes off left edge (relative to page)
            const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
            if (left < scrollLeft + 10) {
                left = scrollLeft + 10;
            }
            
            // Adjust if tooltip goes off right edge
            const maxLeft = scrollLeft + window.innerWidth - tooltipRect.width - 10;
            if (left > maxLeft) {
                left = maxLeft;
            }
            
            // Adjust if tooltip goes off top edge
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (top < scrollTop + 10) {
                top = e.pageY + 20; // Position below cursor instead
            }
            
            tooltip.style.left = left + 'px';
            tooltip.style.top = top + 'px';
        }
        
        console.log('âœ… Cursor-following tooltips initialized!');
        console.log('ðŸ’¡ Hover over any table row to see tooltips follow your cursor');
    </script>
</body>
</html>

